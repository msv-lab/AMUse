public FileDirectory(String dir) throws DirectoryException, UnsupportedEncodingException { this(new File(URLDecoder.decode(dir, "UTF-8"))); }
public static File getFile(Class resourceClass, String fileName) { try { return new File(URLDecoder.decode(resourceClass.getResource(fileName).getFile(), "UTF-8")); } catch (UnsupportedEncodingException e) { return new File(resourceClass.getResource(fileName).getFile()); } }
public static Map<String, String> splitQuery(URL url) throws UnsupportedEncodingException { Map<String, String> query_pairs = new LinkedHashMap<String, String>(); String query = url.getQuery(); String[] pairs = query.split("&"); for (String pair : pairs) { int idx = pair.indexOf("="); query_pairs.put(URLDecoder.decode(pair.substring(0, idx), "UTF-8"), URLDecoder.decode(pair.substring(idx + 1), "UTF-8")); } return query_pairs; }
public static Map<String, List<String>> splitQuery(URL url) throws UnsupportedEncodingException { final Map<String, List<String>> query_pairs = new LinkedHashMap<String, List<String>>(); final String[] pairs = url.getQuery().split("&"); for (String pair : pairs) { final int idx = pair.indexOf("="); final String key = idx > 0 ? URLDecoder.decode(pair.substring(0, idx), "UTF-8") : pair; if (!query_pairs.containsKey(key)) { query_pairs.put(key, new LinkedList<String>()); } final String value = idx > 0 && pair.length() > idx + 1 ? URLDecoder.decode(pair.substring(idx + 1), "UTF-8") : null; query_pairs.get(key).add(value); } return query_pairs; }
private final long getLastModified(String uri) { try { URL url = new URL(uri); URLConnection connection = url.openConnection(); long timestamp = connection.getLastModified(); if (timestamp == 0){ if ("file".equals(url.getProtocol())){ File localfile = new File(URLDecoder.decode(url.getFile())); timestamp = localfile.lastModified(); } } return(timestamp); } catch (Exception e) { return(System.currentTimeMillis()); } }
public static @Nullable java.io.File getFile(URL url) { java.io.File file; String path; try { path = url.toURI().getSchemeSpecificPart(); if ((file = new java.io.File(path)).exists()) return file; } catch (URISyntaxException e) { } try { path = URLDecoder.decode(url.getPath(), "UTF-8"); if (path.contains(".jar!")) path = path.substring(0, path.lastIndexOf(".jar!") + ".jar".length()); if ((file = new java.io.File(path)).exists()) return file; } catch (UnsupportedEncodingException e) { } try { path = url.toExternalForm(); if (path.startsWith("jar:")) path = path.substring("jar:".length()); if (path.startsWith("wsjar:")) path = path.substring("wsjar:".length()); if (path.startsWith("file:")) path = path.substring("file:".length()); if (path.contains(".jar!")) path = path.substring(0, path.indexOf(".jar!") + ".jar".length()); if (path.contains(".war!")) path = path.substring(0, path.indexOf(".war!") + ".war".length()); if ((file = new java.io.File(path)).exists()) return file; path = path.replace("%20", " "); if ((file = new java.io.File(path)).exists()) return file; } catch (Exception e) { } return null; }
protected long getLastModifiedDate(String fileName) { URL resource = Thread.currentThread().getContextClassLoader().getResource(fileName); String filePath = (resource == null) ? fileName : URLDecoder.decode(resource.getFile()); ;int jarIndicator = filePath.indexOf('!'); if (jarIndicator > 0) { filePath = filePath.substring(5, filePath.indexOf('!')); } File file = new File(filePath); if(!file.exists()) { return -1; } else { return file.lastModified(); } } }
private ImageSource(@NonNull Uri uri) { String uriString = uri.toString(); if (uriString.startsWith(FILE_SCHEME)) { File uriFile = new File(uriString.substring(FILE_SCHEME.length() - 1)); if (!uriFile.exists()) { try { uri = Uri.parse(URLDecoder.decode(uriString, "UTF-8")); } catch (UnsupportedEncodingException e) { } } } this.bitmap = null; this.uri = uri; this.resource = null; this.tile = true; }
private ImageSource(@NonNull Uri uri) { String uriString = uri.toString(); if (uriString.startsWith(FILE_SCHEME)) { File uriFile = new File(uriString.substring(FILE_SCHEME.length() - 1)); if (!uriFile.exists()) { try { uri = Uri.parse(URLDecoder.decode(uriString, "UTF-8")); } catch (UnsupportedEncodingException e) { } } } this.bitmap = null; this.uri = uri; this.resource = null; this.tile = true; }
private static AuthMethodConfig createAuthMethodConfig(String part, Map<String, String> replacements) throws UnsupportedEncodingException { String name = URLDecoder.decode(part, UTF_8); if (replacements.containsKey(name)) { return new AuthMethodConfig(replacements.get(name)); } return new AuthMethodConfig(name); }
private static void setRunningLocation(CliMain m) { mRunningLocation = m.getClass().getProtectionDomain().getCodeSource().getLocation().getPath(); try { mRunningLocation = URLDecoder.decode(mRunningLocation, "utf-8"); } catch (UnsupportedEncodingException e) { e.printStackTrace(); } if (mRunningLocation.endsWith(".jar")) { mRunningLocation = mRunningLocation.substring(0, mRunningLocation.lastIndexOf(File.separator) + 1); } File f = new File(mRunningLocation); mRunningLocation = f.getAbsolutePath(); }
if ("jar".equals(url.getProtocol())) { String toReturn = url.getPath(); if (toReturn.startsWith("file:")) { toReturn = toReturn.substring("file:".length()); toReturn = URLDecoder.decode(toReturn, "UTF-8"); return toReturn.replaceAll("!.*$", ""); return packagedClasses.get(class_file);
urlProperties = StringUtils.decodeMap(URLDecoder.decode(urlParams.get("properties"), "UTF-8")); } else if (urlParams.containsKey("props")) { urlProperties = StringUtils.decodeMap(URLDecoder.decode(urlParams.get("props"), "UTF-8")); if (urlProperties.containsKey("annotators") && urlProperties.get("annotators") != null && ArrayUtils.contains(urlProperties.get("annotators").split(","), "parse")) {
public URL convertToURLEscapingIllegalCharacters(String string){ try { String decodedURL = URLDecoder.decode(string, "UTF-8"); URL url = new URL(decodedURL); URI uri = new URI(url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef());  return uri.toURL();  } catch (Exception ex) { ex.printStackTrace(); return null; } }
String path = Test.class.getProtectionDomain().getCodeSource().getLocation().getPath(); String decodedPath = URLDecoder.decode(path, "UTF-8");
while (dirs.hasMoreElements()) { URL url = dirs.nextElement(); String protocol = url.getProtocol(); if ("file".equals(protocol)) { String filePath = URLDecoder.decode(url.getFile(), "UTF-8"); doScanPackageClassesByFile(classes, packageName, filePath, recursive); } else if ("jar".equals(protocol)) {
private static boolean matchTestClasspath(URL url, String lastFragment, boolean recursive) { String[] classpathFragments= getTestClasspath(); if(null == classpathFragments) { return true; } String fileName= ""; try { fileName= URLDecoder.decode(url.getFile(), UTF_8); } catch(UnsupportedEncodingException ueex) { } for(String classpathFrag: classpathFragments) { String path=  classpathFrag + lastFragment; int idx= fileName.indexOf(path); if((idx == -1) || (idx > 0 && fileName.charAt(idx-1) != '/')) { continue; } if(fileName.endsWith(classpathFrag + lastFragment) || (recursive && fileName.charAt(idx + path.length()) == '/')) { return true; } } return false; }
public QueryParameterMap(String queryString) { if (queryString==null || queryString.length()==0) return; try { for (String param : queryString.split("&")) { String[] kv = param.split("="); String key = URLDecoder.decode(kv[0], "UTF-8"); String value = URLDecoder.decode(kv[1], "UTF-8"); List<String> values = store.get(key); if (values == null) store.put(key, values = new ArrayList<String>()); values.add(value); } } catch (UnsupportedEncodingException e) { throw new AssertionError(e); } }
private File urlToFileOrNull(URL url) { if (test_emulateNoUrlToFileConversions) { return null; } if (!"file".equals(url.getProtocol())) { return null; } String filePath; try { filePath = url.toURI().getSchemeSpecificPart(); } catch (URISyntaxException e) { try { filePath = URLDecoder.decode(url.getFile(), PLATFORM_FILE_ENCODING); } catch (UnsupportedEncodingException e2) { throw new BugException(e2); } } return new File(filePath); }
private void addParams(Map<String, String> params, String paramStr) throws UnsupportedEncodingException { String[] tempArray = paramStr.split("&"); for (String str : tempArray) { String[] param = str.split("="); if (param.length == 2) { params.put(param[0], URLDecoder.decode(param[1], "UTF-8")); } } }